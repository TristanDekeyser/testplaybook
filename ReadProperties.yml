---
- name: Clone or pull GitHub repo and read variables
  hosts: localhost

  tasks:
    - name: Check if the repository exists
      stat:
        path: .
      register: repo_exists

    - name: Clone the GitHub repository
      git:
        repo: "git@git.is4u.be:stage/stage-2025-ansible-tower/client-configurations.git"
        dest: repository_1_4
        version: main

    - name: Read variables from vars.yml
      include_vars:
        file: /DEV/testClient.yml

    - name: Display variables
      debug:
        msg:
          - "Client Name: {{ client_name }}"
          - "Definition Name: {{ definition_name }}"
          - "Company Name: {{ company_name }}"
          - "Redirect URIs: {{ redirect_uri }}"
          - "Client ID: {{ client_id }}"
          - "Client Secret: {{ client_secret }}"
          - "Require PKCE: {{ require_pkce }}"
          - "Ext Properties: {{ extProperties }}"
